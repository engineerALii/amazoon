<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Amazon Supplements</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Cinzel+Decorative:wght@700;900&family=Russo+One&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* =========================================
           1. Modern Design System
           ========================================= */
        :root {
            --font-main: 'Cairo', sans-serif;
            --font-logo: 'Cinzel Decorative', cursive;
            --font-english: 'Russo One', sans-serif;
            
            /* Premium Light Theme */
            --bg-body: #f8f9fa;
            --bg-card: #ffffff;
            --text-primary: #2d3436;
            --text-secondary: #636e72;
            --primary-color: #0984e3;
            --primary-gradient: linear-gradient(135deg, #0984e3 0%, #00cec9 100%);
            --accent-color: #d63031;
            --accent-gradient: linear-gradient(135deg, #d63031 0%, #e17055 100%);
            --border-color: #dfe6e9;
            --glass-bg: rgba(255, 255, 255, 0.98);
            --shadow-sm: 0 4px 6px rgba(0,0,0,0.05);
            --shadow-md: 0 10px 15px rgba(0,0,0,0.08);
            --shadow-lg: 0 20px 25px rgba(0,0,0,0.1);
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --transition: cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
        }

        /* Themes */
        [data-theme="dark"] {
            --bg-body: #121212; --bg-card: #1e1e1e; --text-primary: #dfe6e9; --text-secondary: #b2bec3;
            --primary-color: #3742fa; --primary-gradient: linear-gradient(135deg, #3742fa 0%, #0984e3 100%);
            --border-color: #2d3436; --glass-bg: rgba(30, 30, 30, 0.98);
        }
        [data-theme="sport-red"] {
            --bg-body: #2d1313; --bg-card: #3d1a1a; --text-primary: #fff; --text-secondary: #e2e2e2;
            --primary-color: #ff4757; --primary-gradient: linear-gradient(135deg, #ff4757 0%, #ff6b81 100%);
            --border-color: #592525; --glass-bg: rgba(61, 26, 26, 0.95);
        }
        [data-theme="sport-green"] {
            --bg-body: #0d2112; --bg-card: #15331c; --text-primary: #fff; --text-secondary: #e2e2e2;
            --primary-color: #2ecc71; --primary-gradient: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            --border-color: #1e4d2b; --glass-bg: rgba(21, 51, 28, 0.95);
        }
        [data-theme="royal-gold"] {
            --bg-body: #1c1c1c; --bg-card: #2a2a2a; --text-primary: #ffd700; --text-secondary: #d4af37;
            --primary-color: #ffd700; --primary-gradient: linear-gradient(135deg, #ffd700 0%, #fdb931 100%);
            --accent-color: #fff; --border-color: #444; --glass-bg: rgba(28, 28, 28, 0.95);
        }
        [data-theme="midnight-purple"] {
            --bg-body: #1a0b2e; --bg-card: #2d1b4e; --text-primary: #e0d4fc; --text-secondary: #b39ddb;
            --primary-color: #7b1fa2; --primary-gradient: linear-gradient(135deg, #7b1fa2 0%, #9c27b0 100%);
            --accent-color: #00e5ff; --border-color: #4a148c; --glass-bg: rgba(26, 11, 46, 0.95);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            overflow-x: hidden;
            width: 100%;
            position: relative;
            touch-action: pan-y;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-body); }
        ::-webkit-scrollbar-thumb { background: var(--text-secondary); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-color); }
        body.no-scroll { overflow: hidden; }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease, opacity 0.5s ease-in-out;
            line-height: 1.6;
            font-weight: 700;
            text-transform: uppercase;
            opacity: 0; /* Hidden initially */
        }
        
        body.loaded {
            opacity: 1; /* Fade in when ready */
        }

        /* LTR Support for English */
        html[dir="ltr"] {
            font-family: 'Roboto', sans-serif; /* Optional: Switch font for English if needed */
        }
        
        html[dir="ltr"] .logo i { margin-right: 5px; margin-left: 0; }
        html[dir="ltr"] .form-group { text-align: left; }
        html[dir="ltr"] .contact-item i { margin-right: 10px; margin-left: 0; } 
        html[dir="ltr"] .footer-links a::before { content: '\f105'; } 
        html[dir="ltr"] .nav-links a::after { left: 0; right: auto; }
        html[dir="ltr"] .modal-close { left: auto; right: 20px; }

        p, span, div, h1, h2, h3, h4, h5, h6 { letter-spacing: 0.5px; }
        a { text-decoration: none; color: inherit; transition: var(--transition); }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        button { font-family: var(--font-main); cursor: pointer; border: none; outline: none; transition: var(--transition); font-weight: 900; text-transform: uppercase; }

        /* LOADING SCREEN */
        #page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-body);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--border-color);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        .loading-text {
            font-family: var(--font-english);
            font-size: 1.2rem;
            color: var(--text-primary);
            letter-spacing: 2px;
            animation: pulse 1.5s infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        /* Header */
        header {
            background-color: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 20px; }
        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; }

        /* PROFESSIONAL LOGO STYLE */
        .logo {
            font-family: var(--font-logo);
            font-size: 34px; 
            font-weight: 900;
            color: var(--text-primary); 
            text-transform: uppercase;
            letter-spacing: -1px; 
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }
        
        .logo span { color: var(--primary-color); }
        .logo i { font-size: 0.8em; color: var(--accent-color); transform: rotate(-15deg); }
        .logo::after { display: none; }

        .nav-links { display: flex; gap: 40px; align-items: center; }
        .nav-links a { font-weight: 800; font-size: 16px; color: var(--text-secondary); position: relative; font-family: var(--font-main); }
        .nav-links a:hover, .nav-links a.active { color: var(--primary-color); }
        .nav-links a::after { content: ''; position: absolute; bottom: -6px; right: 0; width: 0; height: 4px; background: var(--primary-gradient); border-radius: 4px; transition: var(--transition); }
        .nav-links a:hover::after, .nav-links a.active::after { width: 100%; }

        .nav-icons { display: flex; gap: 15px; align-items: center; }
        .icon-btn { background: var(--bg-body); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; color: var(--text-primary); box-shadow: var(--shadow-sm); border: 2px solid var(--border-color); }
        .icon-btn:hover { transform: translateY(-2px); color: #fff; background: var(--primary-gradient); border-color: transparent; box-shadow: var(--shadow-md); }
        #themeSwitcherBtn { display: none; }
        .cart-wrapper { position: relative; }
        .cart-count { position: absolute; top: -5px; right: -5px; background: var(--accent-gradient); color: white; font-size: 11px; width: 22px; height: 22px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; border: 2px solid var(--bg-card); }

        /* Hero */
        .hero { position: relative; padding: 80px 0; overflow: hidden; background-color: var(--bg-body); background-image: radial-gradient(var(--border-color) 1px, transparent 1px); background-size: 30px 30px; }
        .hero-container { display: grid; grid-template-columns: 1fr 1fr; align-items: center; gap: 40px; }
        .hero-content { z-index: 2; }
        .hero-badge { display: inline-block; background: rgba(9, 132, 227, 0.1); color: var(--primary-color); padding: 10px 20px; border-radius: 30px; font-weight: 800; font-size: 14px; margin-bottom: 20px; border: 2px solid rgba(9, 132, 227, 0.2); }
        .hero h1 { font-size: 3.5rem; line-height: 1.15; margin-bottom: 25px; font-weight: 900; text-transform: uppercase; }
        .hero h1 span { background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { font-size: 1.3rem; color: var(--text-secondary); margin-bottom: 40px; max-width: 500px; font-weight: 600; }
        .hero-btns { display: flex; gap: 15px; flex-wrap: wrap; }
        .btn { padding: 14px 30px; border-radius: 50px; font-weight: 900; font-size: 16px; display: flex; align-items: center; gap: 10px; position: relative; overflow: hidden; z-index: 1; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; }
        .btn-primary { background: var(--primary-gradient); color: #fff; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); }
        .btn-primary:hover { box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); transform: translateY(-3px); }
        .btn-outline { background: transparent; color: var(--text-primary); border: 3px solid var(--border-color); }
        .btn-outline:hover { border-color: var(--text-primary); background: var(--text-primary); color: var(--bg-card); }
        .hero-image { position: relative; z-index: 1; animation: float 6s ease-in-out infinite; }
        .hero-image img { width: 100%; max-width: 500px; margin: 0 auto; filter: drop-shadow(0 30px 60px rgba(0,0,0,0.2)); }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0px); } }

        /* Sections */
        .section-header { text-align: center; margin: 80px 0 50px; }
        .section-title { font-size: 2.8rem; font-weight: 900; margin-bottom: 10px; text-transform: uppercase; }
        .section-subtitle { color: var(--text-secondary); font-size: 1.2rem; font-weight: 600; }

        /* Products Grid */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; padding-bottom: 60px; }
        .product-card { background: var(--bg-card); border-radius: var(--radius-md); transition: var(--transition); position: relative; display: flex; flex-direction: column; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); overflow: hidden; }
        .product-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); border-color: var(--primary-color); }
        .card-img-box { height: 300px; width: 100%; padding: 10px; position: relative; display: flex; align-items: center; justify-content: center; background: transparent; border-bottom: none; }
        .card-img-box img { width: 100%; height: 100%; object-fit: contain; transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); filter: drop-shadow(0 5px 15px rgba(0,0,0,0.05)); }
        .product-card:hover .card-img-box img { transform: scale(1.1); }
        .card-tag { position: absolute; top: 15px; left: 15px; background: var(--accent-gradient); color: white; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: 900; z-index: 10; box-shadow: 0 4px 10px rgba(255, 63, 52, 0.3); text-transform: uppercase; }
        .card-content { padding: 25px; display: flex; flex-direction: column; flex-grow: 1; }
        .card-title { font-size: 20px; font-weight: 800; margin-bottom: 10px; line-height: 1.4; color: var(--text-primary); font-family: var(--font-english); }
        .card-brand-name { font-size: 13px; text-transform: uppercase; color: var(--text-secondary); font-weight: 800; margin-bottom: 5px; letter-spacing: 1px; }
        .card-price-row { margin-top: auto; display: flex; justify-content: space-between; align-items: center; padding-top: 15px; border-top: 1px solid var(--border-color); }
        .price { font-size: 24px; font-weight: 900; color: var(--text-primary); }
        .add-cart-btn { background: var(--text-primary); color: var(--bg-card); width: 45px; height: 45px; border-radius: 12px; display: flex; align-items: center; justify-content: center; transition: var(--transition); font-size: 18px; }
        .add-cart-btn:hover { background: var(--primary-color); color: #fff; transform: rotate(90deg); }

        /* Categories Grid */
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; padding-bottom: 60px; }
        .category-card { height: 350px; border-radius: var(--radius-lg); position: relative; overflow: hidden; cursor: pointer; box-shadow: var(--shadow-md); transition: var(--transition); background: var(--bg-card); }
        .category-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); }
        .category-card img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s ease; }
        .category-card:hover img { transform: scale(1.15); }
        .category-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.2) 60%, transparent 100%); display: flex; align-items: flex-end; padding: 30px; z-index: 2; }
        .category-info h3 { color: #fff; font-size: 36px; font-weight: 900; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; font-family: var(--font-english); }
        .category-info p { color: rgba(255,255,255,0.9); font-size: 16px; font-weight: 700; }

        /* Draggable Slider */
        .slider-wrapper { background: var(--bg-card); padding: 50px 0; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); }
        .slider-track-container { 
            direction: ltr;
            overflow-x: auto; 
            overflow-y: hidden;
            padding: 20px 0; 
            position: relative; 
            cursor: grab;
            white-space: nowrap;
            scrollbar-width: none; 
            -ms-overflow-style: none;
            -webkit-overflow-scrolling: touch;
        }
        .slider-track-container::-webkit-scrollbar { display: none; }
        .slider-track { display: inline-flex; gap: 25px; }
        .slider-track-container.active { cursor: grabbing; }

        /* Brands */
        .brands-section { padding: 60px 0; background: var(--bg-body); }
        .brands-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
            gap: 20px; 
            margin-top: 30px; 
            justify-content: center;
        }
        .brand-card { 
            background: #fff; 
            border: 1px solid var(--border-color); 
            border-radius: var(--radius-md); 
            padding: 20px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: var(--transition); 
            height: 120px; 
            box-shadow: var(--shadow-sm); 
        }
        .brand-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); border-color: var(--primary-color); }
        .brand-card img { width: auto; height: auto; max-width: 100%; max-height: 100%; object-fit: contain; transition: var(--transition); filter: grayscale(100%); opacity: 0.8; }
        .brand-card:hover img { filter: grayscale(0%); opacity: 1; transform: scale(1.05); }

        /* Admin Styles & Toolbar */
        .admin-toolbar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: var(--bg-card);
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .btn-admin {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 800;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid var(--border-color);
            background: var(--bg-body);
            color: var(--text-primary);
        }

        .btn-admin:hover {
            background: var(--bg-card);
            border-color: var(--primary-color);
            color: var(--primary-color);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .btn-admin.danger { color: var(--accent-color); border-color: rgba(214, 48, 49, 0.2); }
        .btn-admin.danger:hover { background: var(--accent-color); color: white; border-color: var(--accent-color); }

        /* Form Group Styles */
        .form-group { margin-bottom: 20px; text-align: right; }
        html[dir="ltr"] .form-group { text-align: left; }
        .form-group label { display: block; margin-bottom: 10px; font-weight: 800; color: var(--text-primary); font-size: 14px; }
        .form-input { width: 100%; padding: 12px 15px; border-radius: 10px; border: 2px solid var(--border-color); background: var(--bg-body); color: var(--text-primary); font-family: var(--font-main); outline: none; transition: var(--transition); font-weight: 600; font-size: 15px; }
        .form-input:focus { border-color: var(--primary-color); background: var(--bg-card); box-shadow: 0 0 0 3px rgba(9, 132, 227, 0.1); }
        textarea.form-input { resize: vertical; min-height: 100px; line-height: 1.6; }

        /* Admin Lists */
        .admin-brands-list { display: flex; flex-direction: column; gap: 15px; width: 100%; overflow-y: auto; max-height: 55vh; padding-right: 5px; flex-grow: 1; }
        .admin-brands-list::-webkit-scrollbar { width: 6px; }
        .admin-brands-list::-webkit-scrollbar-track { background: transparent; }
        .admin-brands-list::-webkit-scrollbar-thumb { background-color: var(--border-color); border-radius: 10px; }
        .admin-brands-list::-webkit-scrollbar-thumb:hover { background-color: var(--text-secondary); }
        .admin-brand-item { display: flex; align-items: center; justify-content: space-between; background: var(--bg-body); padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); flex-shrink: 0; }
        .admin-brand-info { display: flex; align-items: center; gap: 15px; }
        .admin-brand-img { width: 60px; height: 40px; object-fit: contain; background: #fff; border-radius: 4px; padding: 5px; }

        /* Order Item Style */
        .order-item { background: var(--bg-body); border: 1px solid var(--border-color); padding: 20px; border-radius: 10px; display: flex; flex-direction: column; gap: 10px; }
        .order-header { display: flex; justify-content: space-between; font-weight: 800; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 5px; }
        .order-details { font-size: 0.9em; color: var(--text-secondary); }
        .order-products { margin-top: 10px; background: var(--bg-card); padding: 10px; border-radius: 5px; }
        .order-product { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px dashed var(--border-color); padding-bottom: 5px; }
        .whatsapp-btn { display: inline-flex; align-items: center; gap: 8px; background: #25D366; color: white; padding: 8px 15px; border-radius: 50px; text-decoration: none; font-weight: bold; margin-top: 10px; width: fit-content; transition: transform 0.2s; }
        .whatsapp-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(37, 211, 102, 0.4); }

        /* Filters */
        .filters-container { background: var(--bg-card); padding: 15px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-between; align-items: center; margin-bottom: 40px; border: 1px solid var(--border-color); }
        .search-input { flex: 1; min-width: 250px; padding: 12px 20px; border-radius: 50px; border: 2px solid var(--border-color); background: var(--bg-body); color: var(--text-primary); font-family: var(--font-main); outline: none; transition: var(--transition); font-weight: 700; }
        .search-input:focus { border-color: var(--primary-color); }
        .cat-pills { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .cat-pill { padding: 10px 25px; border-radius: 50px; background: var(--bg-body); color: var(--text-secondary); font-weight: 800; font-size: 14px; white-space: nowrap; border: 2px solid transparent; text-transform: uppercase; }
        .cat-pill:hover { background: #e9ecef; }
        .cat-pill.active { background: var(--primary-gradient); color: #fff; box-shadow: 0 4px 12px rgba(0, 86, 179, 0.2); }

        /* Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; overflow-y: auto; }
        .modal-box { background: var(--bg-card); width: 1000px; max-width: 100%; border-radius: var(--radius-lg); overflow: hidden; display: flex; box-shadow: var(--shadow-lg); position: relative; max-height: 90vh; animation: modalPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); flex-direction: column; }
        .modal-box.scrollable { overflow-y: auto; }
        @media(min-width: 768px) { .modal-box:not(.scrollable) { flex-direction: row; } .modal-left { flex: 1.2; height: auto; } .modal-right { flex: 1; overflow-y: auto; } }
        @keyframes modalPop { from { opacity: 0; transform: scale(0.9) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .modal-left { background: #fff; padding: 40px; display: flex; align-items: center; justify-content: center; height: 300px; }
        .modal-right { padding: 40px; display: flex; flex-direction: column; overflow-y: auto; }
        .modal-close { position: absolute; top: 20px; left: 20px; background: var(--bg-body); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; box-shadow: var(--shadow-sm); font-size: 20px; font-weight: bold; }
        
        /* LTR Fix for Modal Close */
        html[dir="ltr"] .modal-close { left: auto; right: 20px; }

        /* Footer */
        .site-footer {
            background-color: var(--bg-card);
            color: var(--text-primary);
            padding: 4rem 0 2rem;
            margin-top: 4rem;
            border-top: 4px solid var(--primary-color);
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .footer-col {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .footer-col h4 {
            font-size: 1.25rem;
            font-weight: 900;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            position: relative;
            display: inline-block;
        }

        .footer-col p {
            line-height: 1.8;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin: 0;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .footer-links a {
            color: var(--text-secondary);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .footer-links a:hover {
            color: var(--primary-color);
            padding-right: 5px;
        }

        .footer-links a::before {
            content: '\f104'; 
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            font-size: 0.8em;
            color: var(--accent-color);
        }

        .contact-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-body);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            border: 2px solid var(--border-color);
            font-size: 18px;
        }
        
        .social-icon i {
            margin: 0 !important; 
        }
        
        .social-icon:hover {
            background: var(--primary-color);
            color: #fff;
            border-color: transparent;
            transform: translateY(-3px);
        }

        .copy-right {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-family: var(--font-english);
        }

        /* Mobile */
        .hamburger { display: none; font-size: 24px; color: var(--text-primary); background: none; }
        @media (max-width: 900px) {
            .hero-container { grid-template-columns: 1fr; text-align: center; }
            .hero-image { order: -1; margin-bottom: 30px; }
            .hero-btns { justify-content: center; }
            .hero h1 { font-size: 2.5rem; }
            .modal-box { flex-direction: column; overflow-y: auto; }
            .modal-left { padding: 20px; height: 250px; }
        }
        @media (max-width: 768px) {
            .nav-links { display: none; position: fixed; top: 70px; left: 0; right: 0; background: var(--bg-card); flex-direction: column; padding: 30px; border-bottom: 1px solid var(--border-color); box-shadow: var(--shadow-lg); }
            .nav-links.active { display: flex; }
            .hamburger { display: block; }
            .products-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
            .card-img-box { height: 160px; padding: 0; }
            .card-content { padding: 15px; }
            .card-title { font-size: 14px; }
            .price { font-size: 16px; }
            .add-cart-btn { width: 32px; height: 32px; font-size: 14px; }
        }
        @media (max-width: 480px) {
            .products-grid { grid-template-columns: 1fr; }
            .card-img-box { height: 220px; }
            .hero h1 { font-size: 2rem; }
            .container { padding: 0 15px; }
            .brands-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .brand-card { height: 80px; padding: 10px; }
        }

        textarea.search-input { resize: vertical; min-height: 120px; line-height: 1.6; font-family: var(--font-main); }
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(50px); background: rgba(30, 39, 46, 0.95); color: #fff; padding: 12px 30px; border-radius: 50px; font-weight: 800; box-shadow: var(--shadow-lg); opacity: 0; transition: var(--transition); z-index: 5000; backdrop-filter: blur(5px); white-space: nowrap; text-transform: uppercase; }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    
    <!-- Loader -->
    <div id="page-loader">
        <div class="spinner"></div>
        <div class="loading-text">AMAZON</div>
    </div>

    <!-- Navbar -->
    <header>
        <div class="container nav-wrapper">
            <button class="hamburger" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
            <div class="logo"><i class="fas fa-dumbbell"></i> <span>AMAZON</span></div>
            <nav class="nav-links" id="navLinks">
                <a href="#" onclick="navigate('home', event)" class="active" id="nav-home">الرئيسية</a>
                <a href="#" onclick="navigate('products', event)" id="nav-products">المنتجات</a>
                <a href="#" onclick="navigate('categories', event)" id="nav-categories">الأقسام</a>
            </nav>
            <div class="nav-icons">
                <button class="icon-btn" id="themeSwitcherBtn" onclick="openThemeModal()" title="تغيير المظهر"><i class="fas fa-palette"></i></button>
                <div class="cart-wrapper" onclick="openCheckout()">
                    <button class="icon-btn"><i class="fas fa-shopping-bag"></i></button>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <button class="icon-btn" onclick="openAdminCheck()"><i class="fas fa-user"></i></button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- HOME PAGE -->
        <div id="home-page" class="page-section">
            <section class="hero">
                <div class="hero-container">
                    <div class="hero-content">
                        <span class="hero-badge" id="heroBadge"><i class="fas fa-fire"></i> الخيار الأول للرياضيين</span>
                        <h1 id="heroTitle">أداء أقوى.<br><span>نتائج أسرع.</span></h1>
                        <p id="heroDesc">احصل على أفضل المكملات الغذائية العالمية بأسعار تنافسية. بروتينات، كرياتين، وفيتامينات أصلية 100%.</p>
                        <div class="hero-btns">
                            <a href="#" onclick="navigate('products', null)" class="btn btn-primary" id="btn-shop-now">تسوق الآن <i class="fas fa-arrow-left"></i></a>
                            <a href="#" class="btn btn-outline" id="btn-offers">عرض العروض</a>
                        </div>
                    </div>
                    <div class="hero-image">
                        <img id="heroImgDisplay" src="https://gymers.weebly.com/uploads/5/3/0/4/53045443/3113257_orig.png" alt="Supplement Jar">
                    </div>
                </div>
            </section>
            
            <div class="section-header">
                <h2 class="section-title" id="title-best-sellers">الأكثر مبيعاً</h2>
                <p class="section-subtitle" id="subtitle-best-sellers">منتجات يثق بها المحترفون</p>
            </div>
            
            <div class="slider-wrapper">
                <div class="slider-track-container" id="sliderContainer">
                    <div class="slider-track" id="sliderTrack"></div>
                </div>
            </div>

            <div class="section-header">
                <h2 class="section-title" id="title-latest">أحدث المنتجات</h2>
            </div>
            <div class="products-grid" id="home-products-grid"></div>

            <section class="brands-section">
                <div class="section-header">
                    <h2 class="section-title" id="title-brands">تسوق حسب العلامة التجارية</h2>
                    <p class="section-subtitle" id="subtitle-brands">أشهر الماركات العالمية في مكان واحد</p>
                </div>
                <div class="brands-grid" id="brandsGrid"></div>
            </section>
        </div>

        <!-- CATEGORIES PAGE -->
        <div id="categories-page" class="page-section hidden">
            <div class="section-header">
                <h2 class="section-title" id="title-categories">تصفح الأقسام</h2>
                <p class="section-subtitle" id="subtitle-categories">كل ما تحتاجه للوصول لهدفك</p>
            </div>
            <div class="categories-grid" id="categoriesGrid"></div>
        </div>

        <!-- PRODUCTS PAGE -->
        <div id="products-page" class="page-section hidden">
            <div class="section-header">
                <h2 class="section-title" id="title-all-products">جميع المنتجات</h2>
            </div>
            <div class="filters-container">
                <div style="flex: 1; min-width: 250px;">
                    <input type="text" id="searchInput" class="search-input" style="min-height:auto;" placeholder="ابحث عن منتج..." onkeyup="filterProducts()">
                </div>
                <div class="cat-pills" id="categoryFilters">
                    <button class="cat-pill active" data-cat="all" onclick="filterCategory('all', event)">الكل</button>
                </div>
            </div>
            <div id="activeBrandFilter" style="display:none; margin-bottom: 20px; align-items: center; gap: 10px; background: var(--bg-card); padding: 10px 20px; border-radius: 50px; border: 1px solid var(--primary-color); color: var(--primary-color); width: fit-content; font-weight: bold;">
                <span id="activeBrandName">اسم البراند</span>
                <i class="fas fa-times" style="cursor: pointer;" onclick="clearBrandFilter()"></i>
            </div>
            <div class="products-grid" id="all-products"></div>
        </div>

        <!-- ADMIN PAGE -->
        <div id="admin-page" class="page-section hidden">
            <div class="section-header">
                <h2 class="section-title">لوحة التحكم</h2>
            </div>
            <div class="admin-toolbar">
                <button class="btn-admin" onclick="showAddProductModal()">
                    <i class="fas fa-plus-circle"></i> إضافة منتج
                </button>
                <button class="btn-admin" onclick="showBrandsModal()">
                    <i class="fas fa-tags"></i> إدارة البراندات
                </button>
                <button class="btn-admin" onclick="showCategoriesModal()">
                    <i class="fas fa-layer-group"></i> إدارة الأقسام
                </button>
                <button class="btn-admin" onclick="showOrdersModal()">
                    <i class="fas fa-shopping-cart"></i> الطلبات
                </button>
                <button class="btn-admin" onclick="showSiteSettingsModal()">
                    <i class="fas fa-cog"></i> إعدادات الموقع
                </button>
                <button class="btn-admin danger" onclick="logoutAdmin()">
                    <i class="fas fa-sign-out-alt"></i> خروج
                </button>
            </div>
            <div class="products-grid" id="admin-grid"></div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>AMAZON</h4>
                    <p id="footer-desc">المصدر الأول للمكملات الغذائية الأصلية. نوفر لك أفضل العلامات التجارية العالمية لضمان تحقيق أهدافك الرياضية.</p>
                </div>
                <div class="footer-col footer-contact">
                    <h4 id="footer-contact-title">تواصل معنا</h4>
                    <div class="contact-list">
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span id="footerAddress">بغداد، شارع المتنبي، مجمع الرياضة</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone-alt"></i>
                            <span style="direction: ltr;" id="footerPhone">+964 770 123 4567</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span id="footerEmail">support@amazon.com</span>
                        </div>
                    </div>
                    <!-- Dynamic Social Icons -->
                    <div class="social-icons" id="footerSocials">
                        <!-- Filled by JS -->
                    </div>
                </div>
                <div class="footer-col">
                    <h4 id="footer-links-title">روابط سريعة</h4>
                    <div class="footer-links">
                        <a href="#" onclick="navigate('home', null)" id="footer-home">الرئيسية</a>
                        <a href="#" onclick="navigate('products', null)" id="footer-products">المنتجات</a>
                        <a href="#" onclick="navigate('categories', null)" id="footer-categories">الأقسام</a>
                    </div>
                </div>
            </div>
            <div class="copy-right">&copy; 2026 Amazon. All Rights Reserved.</div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="productModal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-close" onclick="closeModal('productModal')"><i class="fas fa-times"></i></div>
            <div class="modal-left">
                <img id="modal-img" src="" alt="" style="max-height: 100%; max-width: 100%; object-fit: contain;">
            </div>
            <div class="modal-right">
                <span id="modal-cat" style="color:var(--primary-color); font-weight:800; font-size:14px; font-family:var(--font-english);">CATEGORY</span>
                <span id="modal-brand" style="color:var(--text-secondary); font-weight:800; font-size:14px; display:block; margin-top:5px; font-family:var(--font-english);">BRAND</span>
                <h2 id="modal-title" style="font-size:2.5rem; margin: 10px 0; font-family:var(--font-english);">Product Name</h2>
                <div style="color:#f1c40f; margin-bottom: 20px;">
                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                </div>
                <h3 id="modal-price" style="font-size:3rem; font-weight:900; color:var(--text-primary); margin-bottom:20px;">$55.00</h3>
                <p id="modal-desc" style="color:var(--text-secondary); line-height:1.7; margin-bottom:30px; font-size:1.1rem; font-weight:600;"></p>
                <button class="btn btn-primary" style="width:100%; justify-content:center; padding: 18px;" onclick="addToCartFromModal()" id="modal-add-btn">إضافة إلى السلة <i class="fas fa-shopping-bag"></i></button>
            </div>
        </div>
    </div>

    <div id="themeModal" class="modal-overlay">
         <div class="modal-box" style="width: 500px; flex-direction: column; padding: 40px; text-align:center;">
            <div class="modal-close" onclick="closeModal('themeModal')"><i class="fas fa-times"></i></div>
            <h2 style="margin-bottom: 30px;">اختر مظهر الموقع</h2>
            <div class="products-grid" style="grid-template-columns: 1fr 1fr; gap: 20px; padding: 0; box-shadow:none;">
                <button class="cat-pill" style="background:#f0f2f5; color:#1e272e; width:100%; justify-content:center; padding:15px; border-radius:12px;" onclick="setTheme('light')">Light <i class="fas fa-sun"></i></button>
                <button class="cat-pill" style="background:#181818; color:#fff; width:100%; justify-content:center; padding:15px; border-radius:12px;" onclick="setTheme('dark')">Dark <i class="fas fa-moon"></i></button>
                <button class="cat-pill" style="background:#ff4757; color:#fff; width:100%; justify-content:center; padding:15px; border-radius:12px;" onclick="setTheme('sport-red')">Sport Red <i class="fas fa-fire"></i></button>
                <button class="cat-pill" style="background:#2ecc71; color:#fff; width:100%; justify-content:center; padding:15px; border-radius:12px;" onclick="setTheme('sport-green')">Sport Green <i class="fas fa-leaf"></i></button>
                <button class="cat-pill" style="background:#ffd700; color:#1c1c1c; width:100%; justify-content:center; padding:15px; border-radius:12px;" onclick="setTheme('royal-gold')">Royal Gold <i class="fas fa-crown"></i></button>
                <button class="cat-pill" style="background:#7b1fa2; color:#fff; width:100%; justify-content:center; padding:15px; border-radius:12px;" onclick="setTheme('midnight-purple')">Midnight Purple <i class="fas fa-bolt"></i></button>
            </div>
         </div>
    </div>

    <div id="checkoutModal" class="modal-overlay">
        <div class="modal-box scrollable" style="width: 500px; flex-direction: column; padding: 40px;">
            <div class="modal-close" onclick="closeModal('checkoutModal')"><i class="fas fa-times"></i></div>
            <h2 style="margin-bottom: 20px;">إتمام الطلب</h2>
            <form onsubmit="handleCheckout(event)" style="display:flex; flex-direction:column;">
                <div class="form-group">
                     <label>الاسم الكامل</label>
                     <input type="text" id="custName" class="form-input" required>
                </div>
                <div class="form-group">
                     <label>رقم الهاتف</label>
                     <input type="tel" id="custPhone" class="form-input" required>
                </div>
                <div class="form-group">
                     <label>المحافظة</label>
                     <select id="custGov" class="form-input" required>
                        <option value="" disabled selected>اختر المحافظة</option>
                        <option value="Baghdad">بغداد</option>
                        <option value="Basra">البصرة</option>
                        <option value="Nineveh">نينوى</option>
                        <option value="Erbil">أربيل</option>
                        <option value="Kirkuk">كركوك</option>
                        <option value="Najaf">النجف الأشرف</option>
                        <option value="Karbala">كربلاء المقدسة</option>
                        <option value="Sulaymaniyah">السليمانية</option>
                        <option value="Duhok">دهوك</option>
                        <option value="Babil">بابل</option>
                        <option value="Anbar">الأنبار</option>
                        <option value="Dhi Qar">ذي قار</option>
                        <option value="Maysan">ميسان</option>
                        <option value="Muthanna">المثنى</option>
                        <option value="Qadisiyah">الديوانية</option>
                        <option value="Wasit">واسط</option>
                        <option value="Diyala">ديالى</option>
                        <option value="Saladin">صلاح الدين</option>
                        <option value="Halabja">حلبجة</option>
                    </select>
                </div>
                <div class="form-group">
                     <label>العنوان بالتحديد</label>
                     <textarea id="custAddress" class="form-input" rows="3" required></textarea>
                </div>
                
                <div style="background: var(--bg-body); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display:flex; justify-content:space-between; font-weight:bold;"><span>إجمالي السلة:</span><span id="checkoutTotal" style="color:var(--primary-color);">$0.00</span></div>
                </div>
                <button type="submit" class="btn btn-primary" style="justify-content: center;">تأكيد الطلب</button>
            </form>
        </div>
    </div>

    <div id="loginOverlay" class="modal-overlay" style="z-index: 3000;">
        <div class="modal-box" style="width: 400px; flex-direction: column; padding: 40px; text-align: center;">
            <h2 style="margin-bottom: 20px;">تسجيل الدخول</h2>
            <div class="form-group">
                <input type="password" id="adminPass" class="form-input" placeholder="كلمة المرور" style="width: 100%;">
            </div>
            <button class="btn btn-primary" style="width: 100%; justify-content: center;" onclick="checkLogin()">دخول</button>
            <button style="margin-top: 15px; background: none; color: var(--text-secondary);" onclick="closeLogin()">إلغاء</button>
        </div>
    </div>

    <!-- Admin Orders Modal -->
    <div id="manageOrdersModal" class="modal-overlay">
        <div class="modal-box scrollable" style="width: 600px; padding: 30px; max-height: 85vh;">
            <div class="modal-close" onclick="closeModal('manageOrdersModal')"><i class="fas fa-times"></i></div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-shrink:0;">
                <h2>الطلبات الواردة</h2>
                <!-- Optional: Clear all orders button could go here -->
            </div>
            <div class="admin-brands-list" id="adminOrdersList">
                <!-- Orders populated by JS -->
            </div>
        </div>
    </div>

    <div id="editModal" class="modal-overlay">
        <div class="modal-box scrollable" style="width: 500px; padding: 40px;">
            <div class="modal-close" onclick="closeModal('editModal')"><i class="fas fa-times"></i></div>
            <h2 style="margin-bottom: 20px;">إدارة المنتج</h2>
            <form onsubmit="handleProductSubmit(event)">
                <input type="hidden" id="editId">
                <div class="form-group">
                    <label>اسم المنتج (English Name)</label>
                    <input type="text" id="editName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>السعر</label>
                    <input type="number" id="editPrice" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>القسم</label>
                    <select id="editCat" class="form-input"></select>
                </div>
                <div class="form-group">
                    <label>البراند</label>
                    <input type="text" id="editBrand" class="form-input">
                </div>
                <div class="form-group">
                    <label>صورة المنتج (رابط)</label>
                    <input type="text" id="editImg" class="form-input" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label>أو رفع صورة</label>
                    <input type="file" id="editImgFile" accept="image/*" class="form-input" style="padding-top:10px;">
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="editDesc" class="form-input" rows="5"></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%; justify-content: center;">حفظ</button>
            </form>
        </div>
    </div>

    <div id="settingsModal" class="modal-overlay">
        <div class="modal-box scrollable" style="width: 500px; flex-direction: column; padding: 40px;">
            <div class="modal-close" onclick="closeModal('settingsModal')"><i class="fas fa-times"></i></div>
            <h2 style="margin-bottom: 20px;">إعدادات الموقع</h2>
            <form onsubmit="handleSettingsSubmit(event)">
                <div class="form-group">
                    <label>لغة الموقع (Website Language)</label>
                    <select id="setLanguage" class="form-input">
                        <option value="ar">العربية (Arabic)</option>
                        <option value="en">English (الإنجليزية)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>خط الشعار (Logo Font)</label>
                    <select id="setLogoFont" class="form-input">
                        <option value="'Russo One', sans-serif">Russo One (Sporty)</option>
                        <option value="'Cinzel Decorative', cursive">Cinzel Decorative (Luxury)</option>
                        <option value="'Black Ops One', system-ui">Black Ops One (Strong)</option>
                        <option value="'Racing Sans One', system-ui">Racing Sans One (Fast)</option>
                        <option value="'Orbitron', sans-serif">Orbitron (Futuristic)</option>
                        <option value="'Cairo', sans-serif">Cairo (Modern Arabic)</option>
                        <option value="'Changa', sans-serif">Changa (Bold Arabic)</option>
                        <option value="'Tajawal', sans-serif">Tajawal (Clean Arabic)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>العنوان الرئيسي</label>
                    <input type="text" id="setHeroTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>الوصف الرئيسي</label>
                    <textarea id="setHeroDesc" class="form-input" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>صورة الهيرو (رابط)</label>
                    <input type="text" id="setHeroImg" class="form-input">
                </div>
                <div class="form-group">
                    <label>أو رفع صورة</label>
                    <input type="file" id="setHeroImgFile" accept="image/*" class="form-input" style="padding-top:10px;">
                </div>
                
                <hr style="border:0; border-top:1px solid var(--border-color); margin: 20px 0;">
                
                <h3 style="margin-bottom:15px; font-size:16px;">معلومات التواصل (الفوتر)</h3>
                <div class="form-group">
                    <label>العنوان</label>
                    <input type="text" id="setAddress" class="form-input">
                </div>
                <div class="form-group">
                    <label>الهاتف</label>
                    <input type="text" id="setPhone" class="form-input">
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني</label>
                    <input type="text" id="setEmail" class="form-input">
                </div>

                <h3 style="margin-bottom:15px; font-size:16px;">روابط التواصل الاجتماعي</h3>
                <div class="form-group">
                    <label><i class="fab fa-facebook"></i> فيسبوك</label>
                    <input type="text" id="setFb" class="form-input" placeholder="رابط فيسبوك">
                </div>
                <div class="form-group">
                    <label><i class="fab fa-instagram"></i> انستغرام</label>
                    <input type="text" id="setInsta" class="form-input" placeholder="رابط انستغرام">
                </div>
                <div class="form-group">
                    <label><i class="fab fa-whatsapp"></i> واتساب (رابط)</label>
                    <input type="text" id="setWhatsapp" class="form-input" placeholder="https://wa.me/...">
                </div>

                <button type="submit" class="btn btn-primary" style="width:100%; justify-content: center;">حفظ الإعدادات</button>
            </form>
        </div>
    </div>

    <div id="manageBrandsModal" class="modal-overlay">
        <div class="modal-box scrollable" style="width: 600px; padding: 30px; max-height: 85vh;">
            <div class="modal-close" onclick="closeModal('manageBrandsModal')"><i class="fas fa-times"></i></div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-shrink:0;">
                <h2>إدارة العلامات التجارية</h2>
                <button class="btn btn-primary" style="font-size:14px; padding:10px 20px;" onclick="showBrandForm()">+ إضافة</button>
            </div>
            <div class="admin-brands-list" id="adminBrandsList"></div>
        </div>
    </div>

    <div id="manageCategoriesModal" class="modal-overlay">
        <div class="modal-box scrollable" style="width: 600px; padding: 30px; max-height: 85vh;">
            <div class="modal-close" onclick="closeModal('manageCategoriesModal')"><i class="fas fa-times"></i></div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-shrink:0;">
                <h2>إدارة الأقسام</h2>
                <button class="btn btn-primary" style="font-size:14px; padding:10px 20px;" onclick="showCategoryForm()">+ إضافة</button>
            </div>
            <div class="admin-brands-list" id="adminCategoriesList"></div>
        </div>
    </div>

    <div id="brandFormModal" class="modal-overlay" style="z-index: 2100;">
        <div class="modal-box" style="width: 450px; flex-direction: column; padding: 40px;">
            <div class="modal-close" onclick="closeModal('brandFormModal')"><i class="fas fa-times"></i></div>
            <h2 id="brandFormTitle" style="margin-bottom: 20px;">إضافة براند</h2>
            <form onsubmit="handleBrandSubmit(event)">
                <input type="hidden" id="brandEditIndex">
                <div class="form-group">
                    <label>اسم البراند</label>
                    <input type="text" id="brandNameInput" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>شعار البراند (رابط)</label>
                    <input type="text" id="brandImgInput" class="form-input">
                </div>
                <div class="form-group">
                    <label>أو رفع صورة</label>
                    <input type="file" id="brandImgFile" accept="image/*" class="form-input" style="padding-top:10px;">
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%; justify-content: center;">حفظ</button>
            </form>
        </div>
    </div>

    <div id="categoryFormModal" class="modal-overlay" style="z-index: 2100;">
        <div class="modal-box" style="width: 450px; flex-direction: column; padding: 40px;">
            <div class="modal-close" onclick="closeModal('categoryFormModal')"><i class="fas fa-times"></i></div>
            <h2 id="categoryFormTitle" style="margin-bottom: 20px;">إضافة قسم</h2>
            <form onsubmit="handleCategorySubmit(event)">
                <input type="hidden" id="categoryEditIndex">
                <div class="form-group">
                    <label>اسم القسم</label>
                    <input type="text" id="categoryNameInput" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>صورة القسم (رابط)</label>
                    <input type="text" id="categoryImgInput" class="form-input">
                </div>
                <div class="form-group">
                    <label>أو رفع صورة</label>
                    <input type="file" id="categoryImgFile" accept="image/*" class="form-input" style="padding-top:10px;">
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%; justify-content: center;">حفظ</button>
            </form>
        </div>
    </div>

    <div id="toast" class="toast">تمت الإضافة للسلة</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getFirestore, doc, onSnapshot, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD6MRZ7d7J1333erYoBrUGqocJNdGNjB7w",
            authDomain: "neew-aec2b.firebaseapp.com",
            databaseURL: "https://neew-aec2b-default-rtdb.firebaseio.com",
            projectId: "neew-aec2b",
            storageBucket: "neew-aec2b.firebasestorage.app",
            messagingSenderId: "70112873200",
            appId: "1:70112873200:web:b8ef2b3863be6f1bf39035"
        };

        let animationId = null; 

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        console.log("Firebase Initialized");

        const settingsDocRef = doc(db, "app_settings", "general");
        const productsDocRef = doc(db, "app_data", "products");
        const brandsDocRef = doc(db, "app_data", "brands");
        const categoriesDocRef = doc(db, "app_data", "categories");
        // NEW: Orders Collection
        const ordersDocRef = doc(db, "app_data", "orders");

        /* TRANSLATIONS DICTIONARY */
        const translations = {
            ar: {
                home: "الرئيسية",
                products: "المنتجات",
                categories: "الأقسام",
                bestSellers: "الأكثر مبيعاً",
                bestSellersSub: "منتجات يثق بها المحترفون",
                latestProducts: "أحدث المنتجات",
                shopBrands: "تسوق حسب العلامة التجارية",
                shopBrandsSub: "أشهر الماركات العالمية في مكان واحد",
                browseCats: "تصفح الأقسام",
                browseCatsSub: "كل ما تحتاجه للوصول لهدفك",
                allProducts: "جميع المنتجات",
                all: "الكل",
                searchPlaceholder: "ابحث عن منتج...",
                shopNow: "تسوق الآن",
                viewOffers: "عرض العروض",
                footerDesc: "المصدر الأول للمكملات الغذائية الأصلية. نوفر لك أفضل العلامات التجارية العالمية لضمان تحقيق أهدافك الرياضية.",
                contactUs: "تواصل معنا",
                quickLinks: "روابط سريعة",
                addToCart: "إضافة إلى السلة"
            },
            en: {
                home: "Home",
                products: "Products",
                categories: "Categories",
                bestSellers: "Best Sellers",
                bestSellersSub: "Trusted by Professionals",
                latestProducts: "Latest Products",
                shopBrands: "Shop by Brand",
                shopBrandsSub: "World's Top Brands in One Place",
                browseCats: "Browse Categories",
                browseCatsSub: "Everything you need to reach your goal",
                allProducts: "All Products",
                all: "All",
                searchPlaceholder: "Search for a product...",
                shopNow: "Shop Now",
                viewOffers: "View Offers",
                footerDesc: "Your #1 source for authentic supplements. Providing top global brands to ensure you reach your athletic goals.",
                contactUs: "Contact Us",
                quickLinks: "Quick Links",
                addToCart: "Add to Cart"
            }
        };

        // Global State - Empty by default
        let brandsData = [];
        let categoriesData = [];
        let products = [];
        let ordersData = []; // NEW: Orders list
        let cart = JSON.parse(localStorage.getItem('amz_cart')) || [];
        
        let siteConfig = {
            theme: 'light',
            language: 'ar',
            logoFont: "'Russo One', sans-serif",
            heroTitle: "أداء أقوى.<br><span>نتائج أسرع.</span>",
            heroDesc: "احصل على أفضل المكملات الغذائية العالمية بأسعار تنافسية. بروتينات، كرياتين، وفيتامينات أصلية 100%.",
            heroImg: "https://gymers.weebly.com/uploads/5/3/0/4/53045443/3113257_orig.png",
            contactAddress: "بغداد، شارع المتنبي، مجمع الرياضة",
            contactPhone: "+964 770 123 4567",
            contactEmail: "support@amazon.com",
            socials: { fb: "", insta: "", whatsapp: "" }
        };

        let currentTheme = siteConfig.theme;
        let isAdmin = false;
        let activeBrand = null; 
        let currentId = null;

        // Apply theme immediately from default/local
        document.documentElement.setAttribute('data-theme', currentTheme);

        // --- Firebase Listeners ---
        
        // 1. Settings Listener
        onSnapshot(settingsDocRef, (docSnap) => {
            if (docSnap.exists()) {
                siteConfig = docSnap.data();
                applySiteSettings();
            } else {
                setDoc(settingsDocRef, siteConfig);
            }
            
            const loader = document.getElementById('page-loader');
            if(loader) {
                loader.style.opacity = '0';
                setTimeout(() => loader.style.display = 'none', 500);
            }
        });

        // 2. Products Listener
        onSnapshot(productsDocRef, (docSnap) => {
            if (docSnap.exists()) {
                products = docSnap.data().list || [];
            } else {
                setDoc(productsDocRef, { list: [] });
            }
            renderProducts();
            renderHomeProducts(); 
            initCarousel();
        });

        // 3. Brands Listener
        onSnapshot(brandsDocRef, (docSnap) => {
            if (docSnap.exists()) {
                brandsData = docSnap.data().list || [];
            } else {
                setDoc(brandsDocRef, { list: [] });
            }
            renderBrands();
            renderBrandsAdmin();
        });

        // 4. Categories Listener
        onSnapshot(categoriesDocRef, (docSnap) => {
            if (docSnap.exists()) {
                categoriesData = docSnap.data().list || [];
            } else {
                setDoc(categoriesDocRef, { list: [] });
            }
            renderCategories();
            renderCategoryFilters();
            renderCategoriesAdmin();
        });

        // 5. Orders Listener
        onSnapshot(ordersDocRef, (docSnap) => {
            if (docSnap.exists()) {
                ordersData = docSnap.data().list || [];
            } else {
                setDoc(ordersDocRef, { list: [] });
            }
            renderOrdersAdmin();
        });

        // --- Core Functions ---
        window.navigate = function(page, event) {
            const pageElement = document.getElementById(page + '-page');
            if (!pageElement) return;

            document.querySelectorAll('.page-section').forEach(d => d.classList.add('hidden'));
            pageElement.classList.remove('hidden');
            
            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('active');
            } else if (page !== 'admin') {
                const activeLink = document.querySelector(`.nav-links a[onclick*="'${page}'"]`);
                if (activeLink) activeLink.classList.add('active');
            }
            
            if(page === 'home') activeBrand = null; 
            window.scrollTo(0,0);
            
            if(window.innerWidth <= 768) {
                document.getElementById('navLinks').classList.remove('active');
            }
        };

        window.toggleMenu = function() {
            const nav = document.getElementById('navLinks');
            nav.classList.toggle('active');
        };

        window.openThemeModal = function() { document.getElementById('themeModal').style.display = 'flex'; };
        window.closeModal = function(id) { 
            document.getElementById(id).style.display = 'none'; 
            document.body.classList.remove('no-scroll');
        };
        
        window.setTheme = async function(theme) {
            currentTheme = theme;
            document.documentElement.setAttribute('data-theme', theme);
            siteConfig.theme = theme;
            try { await setDoc(settingsDocRef, siteConfig); } catch (e) {}
            closeModal('themeModal');
        };

        window.openCheckout = function() {
            if(cart.length === 0) { showToast("السلة فارغة!"); return; }
            const total = cart.reduce((acc, item) => acc + Number(item.price), 0);
            document.getElementById('checkoutTotal').innerText = `$${total.toFixed(2)}`;
            document.getElementById('checkoutModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };

        window.handleCheckout = async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            const gov = document.getElementById('custGov').value;
            const address = document.getElementById('custAddress').value;

            const newOrder = {
                id: Date.now(),
                customer: { name, phone, gov, address },
                items: cart,
                total: cart.reduce((a, b) => a + Number(b.price), 0),
                date: new Date().toISOString()
            };

            let updatedOrders = [...ordersData, newOrder];
            
            try {
                await setDoc(ordersDocRef, { list: updatedOrders });
                showToast("تم استلام طلبك بنجاح! شكراً لثقتك.");
                cart = [];
                localStorage.setItem('amz_cart', JSON.stringify(cart));
                updateCartCount();
                document.getElementById('checkoutModal').style.display = 'none';
                document.body.classList.remove('no-scroll');
                e.target.reset();
            } catch(err) {
                alert("حدث خطأ أثناء إرسال الطلب.");
            }
        };

        window.openAdminCheck = function() {
            if(isAdmin) navigate('admin', null);
            else {
                document.getElementById('loginOverlay').style.display = 'flex';
                document.body.classList.add('no-scroll');
            }
        };

        window.closeLogin = function() { 
            document.getElementById('loginOverlay').style.display = 'none'; 
            document.body.classList.remove('no-scroll');
        };
        
        window.checkLogin = function() {
            if(document.getElementById('adminPass').value === 'alikuka') {
                isAdmin = true;
                document.getElementById('themeSwitcherBtn').style.display = 'flex';
                localStorage.setItem('amz_admin_auth', 'true');
                closeLogin();
                navigate('admin', null);
                renderProducts(); 
            } else {
                alert('كلمة المرور خاطئة');
            }
        };

        window.logoutAdmin = function() { 
            isAdmin = false; 
            document.getElementById('themeSwitcherBtn').style.display = 'none';
            localStorage.removeItem('amz_admin_auth');
            navigate('home', null); 
        };

        window.showAddProductModal = function() {
             document.getElementById('editModal').style.display = 'flex';
             document.querySelector('#editModal form').reset();
             document.getElementById('editId').value = '';
             populateCategoryDropdown();
             document.body.classList.add('no-scroll');
        };

        window.showBrandsModal = function() {
            renderBrandsAdmin();
            document.getElementById('manageBrandsModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };

        window.showCategoriesModal = function() {
            renderCategoriesAdmin();
            document.getElementById('manageCategoriesModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };

        window.showSiteSettingsModal = function() {
            document.getElementById('setHeroTitle').value = siteConfig.heroTitle.replace(/<br><span>/g, ' ').replace(/<\/span>/g, '');
            document.getElementById('setHeroDesc').value = siteConfig.heroDesc;
            document.getElementById('setHeroImg').value = siteConfig.heroImg || "";
            document.getElementById('setLogoFont').value = siteConfig.logoFont || "'Russo One', sans-serif";
            
            // New Fields
            document.getElementById('setAddress').value = siteConfig.contactAddress || "";
            document.getElementById('setPhone').value = siteConfig.contactPhone || "";
            document.getElementById('setEmail').value = siteConfig.contactEmail || "";
            document.getElementById('setLanguage').value = siteConfig.language || "ar";
            
            if(siteConfig.socials) {
                document.getElementById('setFb').value = siteConfig.socials.fb || "";
                document.getElementById('setInsta').value = siteConfig.socials.insta || "";
                document.getElementById('setWhatsapp').value = siteConfig.socials.whatsapp || "";
            }

            document.getElementById('settingsModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };
        
        window.showOrdersModal = function() {
            renderOrdersAdmin();
            document.getElementById('manageOrdersModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };

        window.filterCategory = function(cat, event) {
            document.querySelectorAll('.cat-pill').forEach(b => b.classList.remove('active'));
            if(event && event.target) {
                event.target.classList.add('active');
            } else {
                const btn = document.querySelector(`.cat-pill[data-cat="${cat}"]`);
                if(btn) btn.classList.add('active');
            }
            renderProducts(cat, document.getElementById('searchInput').value);
        };

        window.goToCategory = function(catName) {
            navigate('products', null);
            filterCategory(catName, null);
        };

        window.filterProducts = function() {
            const search = document.getElementById('searchInput').value;
            const activePill = document.querySelector('.cat-pill.active');
            let cat = activePill ? activePill.getAttribute('data-cat') : 'all';
            renderProducts(cat, search);
        };

        window.filterByBrand = function(brandName) {
            activeBrand = brandName;
            navigate('products', null);
            document.getElementById('activeBrandFilter').style.display = 'flex';
            document.getElementById('activeBrandName').innerText = brandName;
            renderProducts();
            window.scrollTo(0,0);
        };

        window.clearBrandFilter = function() {
            activeBrand = null;
            document.getElementById('activeBrandFilter').style.display = 'none';
            renderProducts();
        };

        window.addToCartFromModal = function() {
            if(currentId) window.addToCart(currentId);
            closeModal('productModal');
        };

        window.openProductDetails = function(id) {
            const p = products.find(x => x.id === id);
            currentId = id;
            document.getElementById('modal-img').src = p.img;
            document.getElementById('modal-title').innerText = p.name;
            document.getElementById('modal-price').innerText = `$${p.price}`;
            document.getElementById('modal-cat').innerText = p.category;
            document.getElementById('modal-brand').innerText = p.brand || ""; 
            document.getElementById('modal-desc').innerText = p.desc;
            document.getElementById('productModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };

        window.addToCart = function(id) {
            const p = products.find(x => x.id === id);
            cart.push(p);
            localStorage.setItem('amz_cart', JSON.stringify(cart));
            updateCartCount();
            showToast(`تمت إضافة ${p.name}`);
        };

        window.editProduct = function(id) {
            const p = products.find(x => x.id === id);
            populateCategoryDropdown();
            document.getElementById('editId').value = p.id;
            document.getElementById('editName').value = p.name;
            document.getElementById('editPrice').value = p.price;
            document.getElementById('editCat').value = p.category;
            document.getElementById('editBrand').value = p.brand || ""; 
            document.getElementById('editImg').value = p.img;
            document.getElementById('editDesc').value = p.desc;
            document.getElementById('editModal').style.display = 'flex';
            document.body.classList.add('no-scroll');
        };

        window.deleteProduct = async function(id) {
            if(confirm('حذف؟')) {
                const newProducts = products.filter(x => x.id !== id);
                await setDoc(productsDocRef, { list: newProducts });
            }
        };

        window.handleProductSubmit = async function(e) {
            e.preventDefault();
            const id = document.getElementById('editId').value;
            let img = document.getElementById('editImg').value;
            const fileInput = document.getElementById('editImgFile');

            if (fileInput.files && fileInput.files[0]) {
                try { img = await readFileAsBase64(fileInput.files[0]); } catch (err) {}
            }

            const newP = {
                id: id ? Number(id) : Date.now(),
                name: document.getElementById('editName').value,
                price: document.getElementById('editPrice').value,
                category: document.getElementById('editCat').value,
                brand: document.getElementById('editBrand').value || "Generic", 
                img: img || 'https://placehold.co/300', 
                desc: document.getElementById('editDesc').value
            };

            let newProducts = [...products];
            if(id) {
                const idx = newProducts.findIndex(x => x.id == id);
                newProducts[idx] = newP;
            } else {
                newProducts.push(newP);
            }
            
            try {
                await setDoc(productsDocRef, { list: newProducts });
                closeModal('editModal');
                showToast('تم الحفظ');
            } catch(e) {
                alert("خطأ في الحفظ (حجم البيانات كبير جداً)");
            }
        };

        window.handleSettingsSubmit = async function(e) {
            e.preventDefault();
            const rawTitle = document.getElementById('setHeroTitle').value;
            const rawDesc = document.getElementById('setHeroDesc').value;
            let img = document.getElementById('setHeroImg').value;
            const fileInput = document.getElementById('setHeroImgFile');
            const newLogoFont = document.getElementById('setLogoFont').value;
            
            // New Fields
            const addr = document.getElementById('setAddress').value;
            const phone = document.getElementById('setPhone').value;
            const email = document.getElementById('setEmail').value;
            const lang = document.getElementById('setLanguage').value;
            
            const socials = {
                fb: document.getElementById('setFb').value,
                insta: document.getElementById('setInsta').value,
                whatsapp: document.getElementById('setWhatsapp').value
            };

            if (fileInput.files && fileInput.files[0]) {
                try { img = await readFileAsBase64(fileInput.files[0]); } catch (err) {}
            }

            siteConfig.heroTitle = rawTitle; 
            siteConfig.heroDesc = rawDesc;
            siteConfig.logoFont = newLogoFont;
            siteConfig.contactAddress = addr;
            siteConfig.contactPhone = phone;
            siteConfig.contactEmail = email;
            siteConfig.language = lang;
            siteConfig.socials = socials;
            
            if(img) siteConfig.heroImg = img;

            try { await setDoc(settingsDocRef, siteConfig); } catch (e) {}
            closeModal('settingsModal');
            showToast('تم التحديث');
        };

        /* --- CATEGORIES & BRANDS LOGIC (FIRESTORE) --- */
        window.showBrandForm = function() {
            document.getElementById('brandFormModal').style.display = 'flex';
            document.querySelector('#brandFormModal form').reset();
            document.getElementById('brandEditIndex').value = '';
            document.getElementById('brandFormTitle').innerText = 'إضافة براند جديد';
            document.body.classList.add('no-scroll');
        };

        window.editBrand = function(index) {
            const b = brandsData[index];
            document.getElementById('brandFormModal').style.display = 'flex';
            document.getElementById('brandEditIndex').value = index;
            document.getElementById('brandNameInput').value = b.name;
            document.getElementById('brandImgInput').value = b.logo;
            document.getElementById('brandFormTitle').innerText = 'تعديل البراند';
            document.body.classList.add('no-scroll');
        };

        window.handleBrandSubmit = async function(e) {
            e.preventDefault();
            const index = document.getElementById('brandEditIndex').value;
            const name = document.getElementById('brandNameInput').value;
            let img = document.getElementById('brandImgInput').value;
            const fileInput = document.getElementById('brandImgFile');

            if (fileInput.files && fileInput.files[0]) {
                try { img = await readFileAsBase64(fileInput.files[0]); } catch (err) {}
            }

            const newBrand = { name, logo: img || 'https://placehold.co/150x50' };
            let newBrands = [...brandsData];

            if(index !== "") {
                newBrands[index] = newBrand;
            } else {
                newBrands.push(newBrand);
            }

            await setDoc(brandsDocRef, { list: newBrands });
            closeModal('brandFormModal');
            showToast('تم حفظ البراند');
        };

        window.deleteBrand = async function(index) {
            if(confirm('حذف؟')) {
                let newBrands = [...brandsData];
                newBrands.splice(index, 1);
                await setDoc(brandsDocRef, { list: newBrands });
            }
        };

        // Category CRUD
        window.showCategoryForm = function() {
            document.getElementById('categoryFormModal').style.display = 'flex';
            document.querySelector('#categoryFormModal form').reset();
            document.getElementById('categoryEditIndex').value = '';
            document.getElementById('categoryFormTitle').innerText = 'إضافة قسم جديد';
            document.body.classList.add('no-scroll');
        };

        window.editCategory = function(index) {
            const c = categoriesData[index];
            document.getElementById('categoryFormModal').style.display = 'flex';
            document.getElementById('categoryEditIndex').value = index;
            document.getElementById('categoryNameInput').value = c.name;
            document.getElementById('categoryImgInput').value = c.img;
            document.getElementById('categoryFormTitle').innerText = 'تعديل القسم';
            document.body.classList.add('no-scroll');
        };

        window.handleCategorySubmit = async function(e) {
            e.preventDefault();
            const index = document.getElementById('categoryEditIndex').value;
            const name = document.getElementById('categoryNameInput').value;
            let img = document.getElementById('categoryImgInput').value;
            const fileInput = document.getElementById('categoryImgFile');

            if (fileInput.files && fileInput.files[0]) {
                try { img = await readFileAsBase64(fileInput.files[0]); } catch (err) {}
            }

            const newCat = { name, img: img || 'https://placehold.co/300' };
            let newCats = [...categoriesData];

            if(index !== "") {
                newCats[index] = newCat;
            } else {
                newCats.push(newCat);
            }

            await setDoc(categoriesDocRef, { list: newCats });
            closeModal('categoryFormModal');
            showToast('تم حفظ القسم');
        };

        window.deleteCategory = async function(index) {
            if(confirm('حذف هذا القسم؟')) {
                let newCats = [...categoriesData];
                newCats.splice(index, 1);
                await setDoc(categoriesDocRef, { list: newCats });
            }
        };

        // --- Render Functions ---
        renderApp();

        if (localStorage.getItem('amz_admin_auth') === 'true') {
            isAdmin = true;
            document.getElementById('themeSwitcherBtn').style.display = 'flex';
        }

        function renderApp() {
            // Initial renders (will be updated by listeners)
            renderBrands();
            renderCategories();
            renderCategoryFilters();
            renderProducts();
            renderHomeProducts(); // Initial call
            initCarousel();
            updateCartCount();
            applySiteSettings();
            // Fallback to show site if Firebase takes too long
            setTimeout(() => document.body.classList.add('loaded'), 1500); 
        }

        function applySiteSettings() {
            // Apply Theme
            if(siteConfig.theme) {
                document.documentElement.setAttribute('data-theme', siteConfig.theme);
            }
            
            // Apply Language (Direction)
            const lang = siteConfig.language || 'ar';
            document.documentElement.setAttribute('dir', lang === 'en' ? 'ltr' : 'rtl');
            document.documentElement.setAttribute('lang', lang);
            
            // Apply Logo Font
            if(siteConfig.logoFont) {
                document.querySelector('.logo').style.fontFamily = siteConfig.logoFont;
            }
            
            // Update Text using Translation Dictionary
            const t = translations[lang] || translations['ar'];
            
            document.getElementById('nav-home').innerText = t.home;
            document.getElementById('nav-products').innerText = t.products;
            document.getElementById('nav-categories').innerText = t.categories;
            document.getElementById('footer-home').innerText = t.home;
            document.getElementById('footer-products').innerText = t.products;
            document.getElementById('footer-categories').innerText = t.categories;

            document.getElementById('title-best-sellers').innerText = t.bestSellers;
            document.getElementById('subtitle-best-sellers').innerText = t.bestSellersSub;
            document.getElementById('title-latest').innerText = t.latestProducts;
            document.getElementById('title-brands').innerText = t.shopBrands;
            document.getElementById('subtitle-brands').innerText = t.shopBrandsSub;
            document.getElementById('title-categories').innerText = t.browseCats;
            document.getElementById('subtitle-categories').innerText = t.browseCatsSub;
            document.getElementById('title-all-products').innerText = t.allProducts;
            
            document.getElementById('searchInput').placeholder = t.searchPlaceholder;
            document.getElementById('btn-shop-now').innerHTML = `${t.shopNow} <i class="fas fa-arrow-${lang === 'en' ? 'right' : 'left'}"></i>`;
            document.getElementById('btn-offers').innerText = t.viewOffers;
            document.getElementById('modal-add-btn').innerHTML = `${t.addToCart} <i class="fas fa-shopping-bag"></i>`;

            document.getElementById('footer-desc').innerText = t.footerDesc;
            document.getElementById('footer-contact-title').innerText = t.contactUs;
            document.getElementById('footer-links-title').innerText = t.quickLinks;

            // Update Dynamic Content (Contact & Socials)
            document.getElementById('footerAddress').innerText = siteConfig.contactAddress || "Baghdad, Al-Mutanabbi St.";
            document.getElementById('footerPhone').innerText = siteConfig.contactPhone || "+964 770 123 4567";
            document.getElementById('footerEmail').innerText = siteConfig.contactEmail || "support@amazon.com";

            document.getElementById('heroTitle').innerHTML = siteConfig.heroTitle;
            document.getElementById('heroDesc').innerHTML = siteConfig.heroDesc;
            const heroImgEl = document.getElementById('heroImgDisplay');
            if(heroImgEl && siteConfig.heroImg) heroImgEl.src = siteConfig.heroImg;

            // Render Social Icons
            const socialsContainer = document.getElementById('footerSocials');
            let socialHtml = '';
            if(siteConfig.socials) {
                if(siteConfig.socials.fb) socialHtml += `<a href="${siteConfig.socials.fb}" target="_blank" class="social-icon"><i class="fab fa-facebook-f"></i></a>`;
                if(siteConfig.socials.insta) socialHtml += `<a href="${siteConfig.socials.insta}" target="_blank" class="social-icon"><i class="fab fa-instagram"></i></a>`;
                if(siteConfig.socials.whatsapp) socialHtml += `<a href="${siteConfig.socials.whatsapp}" target="_blank" class="social-icon"><i class="fab fa-whatsapp"></i></a>`;
            }
            socialsContainer.innerHTML = socialHtml;
        }

        function renderBrands() {
            const grid = document.getElementById('brandsGrid');
            if(grid) {
                grid.innerHTML = brandsData.map(b => `
                    <div class="brand-card" onclick="filterByBrand('${b.name}')">
                        <img src="${b.logo}" alt="${b.name}" onerror="this.src='https://placehold.co/150x50?text=${b.name}'">
                    </div>
                `).join('');
            }
        }

        function renderCategories() {
            const grid = document.getElementById('categoriesGrid');
            if(grid) {
                grid.innerHTML = categoriesData.map(c => `
                    <div class="category-card" onclick="goToCategory('${c.name}')">
                        <img src="${c.img}" alt="${c.name}">
                        <div class="category-overlay">
                            <div class="category-info">
                                <h3>${c.name}</h3>
                                <p>تسوق الآن</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        function renderCategoryFilters() {
            const container = document.getElementById('categoryFilters');
            if (!container) return;
            const lang = siteConfig.language || 'ar';
            const t = translations[lang] || translations['ar'];
            
            let html = `<button class="cat-pill active" data-cat="all" onclick="filterCategory('all', event)">${t.all}</button>`;
            categoriesData.forEach(c => {
                html += `<button class="cat-pill" data-cat="${c.name}" onclick="filterCategory('${c.name}', event)">${c.name}</button>`;
            });
            container.innerHTML = html;
        }

        function populateCategoryDropdown() {
            const select = document.getElementById('editCat');
            if(!select) return;
            select.innerHTML = categoriesData.map(c => `<option value="${c.name}">${c.name}</option>`).join('');
        }

        function renderProducts(cat = 'all', search = '') {
            const container = document.getElementById('all-products');
            const adminContainer = document.getElementById('admin-grid');
            
            const filtered = products.filter(p => {
                const matchesCat = (cat === 'all' || p.category === cat);
                const matchesSearch = p.name.toLowerCase().includes(search.toLowerCase());
                const matchesBrand = activeBrand ? p.brand === activeBrand : true;
                return matchesCat && matchesSearch && matchesBrand;
            });

            if(container) {
                if(filtered.length > 0) {
                    container.innerHTML = filtered.map(p => createCard(p)).join('');
                } else {
                    container.innerHTML = `<div style="grid-column: 1/-1; text-align:center; padding:40px; color:var(--text-secondary);">لا توجد منتجات تطابق بحثك.</div>`;
                }
            }
            
            if(adminContainer) adminContainer.innerHTML = filtered.map(p => createCard(p, true)).join('');
        }
        
        // Function to render products on Home Page
        function renderHomeProducts() {
             const container = document.getElementById('home-products-grid');
             if(!container) return;
             // Render all products (or you could slice e.g. products.slice(0, 12))
             if(products.length > 0) {
                 container.innerHTML = products.map(p => createCard(p)).join('');
             } else {
                 container.innerHTML = `<div style="grid-column: 1/-1; text-align:center;">لا توجد منتجات حالياً.</div>`;
             }
        }


        function createCard(p, admin = false) {
            return `
            <div class="product-card">
                <div class="card-img-box">
                    ${!admin ? `<span class="card-tag">${p.category}</span>` : ''}
                    <img src="${p.img}" alt="${p.name}" onerror="this.src='https://placehold.co/300'">
                </div>
                <div class="card-content">
                    <div class="card-brand-name">${p.brand}</div>
                    <h3 class="card-title">${p.name}</h3>
                    <div class="card-price-row">
                        <span class="price">$${p.price}</span>
                        ${admin ? 
                        `<div style="display:flex; gap:5px;">
                            <button class="add-cart-btn" style="background:#ff4757; color:#fff" onclick="deleteProduct(${p.id})"><i class="fas fa-trash"></i></button>
                            <button class="add-cart-btn" onclick="editProduct(${p.id})"><i class="fas fa-pen"></i></button>
                         </div>` : 
                        `<button class="add-cart-btn" onclick="openProductDetails(${p.id})"><i class="fas fa-eye"></i></button>
                         <button class="add-cart-btn" style="background:var(--primary-gradient); color:#fff;" onclick="addToCart(${p.id})"><i class="fas fa-plus"></i></button>`
                        }
                    </div>
                </div>
            </div>
            `;
        }

        function initCarousel() {
            const track = document.getElementById('sliderTrack');
            const container = document.getElementById('sliderContainer');
            if(!track || !container) return;
            
            // Cancel previous animation if exists
            if(animationId) cancelAnimationFrame(animationId);

            const items = products.slice(0, 6); 
            // Duplicate 4 times to ensure smooth infinite scroll even on wide screens
            const html = items.map(p => `<div style="width: 280px; flex-shrink: 0;">${createCard(p)}</div>`).join('');
            track.innerHTML = html + html + html + html; 
            
            let isDown = false;
            let startX;
            let scrollLeft;
            let isAutoScrolling = true;
            const speed = 1; // Speed of auto scroll

            // Drag Events
            const startDrag = (e) => {
                isDown = true;
                isAutoScrolling = false; // Stop auto scroll while dragging
                container.classList.add('active');
                const pageX = e.pageX || e.touches[0].pageX;
                startX = pageX - container.offsetLeft;
                scrollLeft = container.scrollLeft;
            };

            const endDrag = () => {
                isDown = false;
                isAutoScrolling = true; // Resume auto scroll
                container.classList.remove('active');
            };

            const moveDrag = (e) => {
                if(!isDown) return;
                e.preventDefault();
                const pageX = e.pageX || e.touches[0].pageX;
                const x = pageX - container.offsetLeft;
                const walk = (x - startX) * 2; 
                container.scrollLeft = scrollLeft - walk;
            };

            // Mouse events
            container.addEventListener('mousedown', startDrag);
            container.addEventListener('mouseleave', endDrag);
            container.addEventListener('mouseup', endDrag);
            container.addEventListener('mousemove', moveDrag);

            // Touch events
            container.addEventListener('touchstart', startDrag);
            container.addEventListener('touchend', endDrag);
            container.addEventListener('touchmove', moveDrag);

            // Auto Scroll Logic
            function animate() {
                if(isAutoScrolling && !isDown) {
                    container.scrollLeft += speed;
                }

                // Infinite Scroll Logic
                const singleSetWidth = container.scrollWidth / 4;
                
                if (container.scrollLeft >= singleSetWidth) {
                    container.scrollLeft -= singleSetWidth;
                } else if (container.scrollLeft <= 0) {
                    // Handle backward drag edge case
                     container.scrollLeft += singleSetWidth;
                }

                animationId = requestAnimationFrame(animate);
            }
            
            animate();
        }

        function updateCartCount() {
            document.getElementById('cartCount').innerText = cart.length;
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function readFileAsBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
                reader.readAsDataURL(file);
            });
        }
        
        function getWhatsappLink(phone) {
            let p = phone.trim();
            // Remove non-digits
            p = p.replace(/\D/g, '');
            // If starts with 07, replace 0 with 964
            if (p.startsWith('07')) {
                p = '964' + p.substring(1);
            }
            // If just 7..., add 964 (common issue)
            if (p.startsWith('7') && p.length === 10) {
                p = '964' + p;
            }
            return `https://wa.me/${p}`;
        }

        function renderOrdersAdmin() {
            const list = document.getElementById('adminOrdersList');
            if(!list) return;
            
            // Sort by date (newest first)
            const sorted = [...ordersData].sort((a,b) => new Date(b.date) - new Date(a.date));
            
            if (sorted.length === 0) {
                list.innerHTML = '<div style="text-align:center; color:var(--text-secondary); padding:20px;">لا توجد طلبات جديدة</div>';
                return;
            }

            list.innerHTML = sorted.map((order, index) => {
                const waLink = getWhatsappLink(order.customer.phone);
                
                return `
                <div class="order-item">
                    <div class="order-header">
                        <span>#${order.id} - ${order.customer.name}</span>
                        <span>$${order.total}</span>
                    </div>
                    <div class="order-details">
                        ${order.customer.gov}, ${order.customer.address}
                    </div>
                    <div class="order-details" style="margin-top:5px;">
                         ${new Date(order.date).toLocaleString('ar-EG')}
                    </div>
                    
                    <div class="order-products">
                        ${order.items.map(i => `
                            <div class="order-product">
                                <span>${i.name}</span>
                                <span>$${i.price}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <a href="${waLink}" target="_blank" class="whatsapp-btn">
                        <i class="fab fa-whatsapp"></i> ${order.customer.phone}
                    </a>
                </div>
            `}).join('');
        }

        function renderBrandsAdmin() {
            const list = document.getElementById('adminBrandsList');
            if(!list) return;
            list.innerHTML = brandsData.map((b, index) => `
                <div class="admin-brand-item">
                    <div class="admin-brand-info">
                        <img src="${b.logo}" class="admin-brand-img" onerror="this.src='https://placehold.co/50'">
                        <strong>${b.name}</strong>
                    </div>
                    <div>
                        <button class="btn-sm" style="background:var(--primary-color); color:#fff; padding:5px 10px; border-radius:4px; margin-left:5px;" onclick="editBrand(${index})"><i class="fas fa-pen"></i></button>
                        <button class="btn-sm" style="background:var(--accent-color); color:#fff; padding:5px 10px; border-radius:4px;" onclick="deleteBrand(${index})"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            `).join('');
        }

        function renderCategoriesAdmin() {
            const list = document.getElementById('adminCategoriesList');
            if(!list) return;
            list.innerHTML = categoriesData.map((c, index) => `
                <div class="admin-brand-item">
                    <div class="admin-brand-info">
                        <img src="${c.img}" class="admin-brand-img" onerror="this.src='https://placehold.co/50'" style="object-fit:cover;">
                        <strong>${c.name}</strong>
                    </div>
                    <div>
                        <button class="btn-sm" style="background:var(--primary-color); color:#fff; padding:5px 10px; border-radius:4px; margin-left:5px;" onclick="editCategory(${index})"><i class="fas fa-pen"></i></button>
                        <button class="btn-sm" style="background:var(--accent-color); color:#fff; padding:5px 10px; border-radius:4px;" onclick="deleteCategory(${index})"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            `).join('');
        }

        window.onclick = function(e) {
            if(e.target.classList.contains('modal-overlay')) e.target.style.display = 'none';
        }
    </script>
</body>
</html>
